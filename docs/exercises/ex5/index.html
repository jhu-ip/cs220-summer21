<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"><title data-react-helmet="true">Day 5 In-class Exercise | EN.601.220: Intermediate Programming</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Day 5 In-class Exercise | EN.601.220: Intermediate Programming"><meta data-react-helmet="true" name="description" content="This is an in-class exercise. An exercise page like this one will contain a brief description but is intended to be supplemented by discussion during our meeting time. Complete the exercise to the best of your ability. Feel free to talk with other students as you work, and do not be afraid to ask questions if you get stuck. Aim to complete as much as possible during our meeting, and try to finish on your own before our next class meeting. Remember to submit on Gradescope once or more, checking the autograder results. For credit, you must submit by the end of the semester."><meta data-react-helmet="true" property="og:description" content="This is an in-class exercise. An exercise page like this one will contain a brief description but is intended to be supplemented by discussion during our meeting time. Complete the exercise to the best of your ability. Feel free to talk with other students as you work, and do not be afraid to ask questions if you get stuck. Aim to complete as much as possible during our meeting, and try to finish on your own before our next class meeting. Remember to submit on Gradescope once or more, checking the autograder results. For credit, you must submit by the end of the semester."><meta data-react-helmet="true" property="og:url" content="https://jhu-ip.github.io/cs220-summer21/docs/exercises/ex5"><link data-react-helmet="true" rel="shortcut icon" href="/cs220-summer21/img/logo_cpp.svg"><link data-react-helmet="true" rel="canonical" href="https://jhu-ip.github.io/cs220-summer21/docs/exercises/ex5"><link rel="stylesheet" href="/cs220-summer21/styles.ed3d7d8a.css">
<link rel="preload" href="/cs220-summer21/styles.5a9dc67c.js" as="script">
<link rel="preload" href="/cs220-summer21/runtime~main.4b7a01e5.js" as="script">
<link rel="preload" href="/cs220-summer21/main.26f5c474.js" as="script">
<link rel="preload" href="/cs220-summer21/1.c12b4abb.js" as="script">
<link rel="preload" href="/cs220-summer21/2.b4f7c0f8.js" as="script">
<link rel="preload" href="/cs220-summer21/31.4c37de0b.js" as="script">
<link rel="preload" href="/cs220-summer21/32.a7ff71e2.js" as="script">
<link rel="preload" href="/cs220-summer21/f976f453.739ed31f.js" as="script">
<link rel="preload" href="/cs220-summer21/17896441.6354757a.js" as="script">
<link rel="preload" href="/cs220-summer21/29729dc7.13a501c9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top navbarHideable_3046"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/cs220-summer21/"><img class="navbar__logo" src="/cs220-summer21/img/logo_cpp.svg" alt="CS220"><strong class="navbar__title">CS220</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cs220-summer21/docs">Syllabus</a><a class="navbar__item navbar__link" href="/cs220-summer21/staff/">Course Staff</a><a class="navbar__item navbar__link" href="/cs220-summer21/staff/office_hours">Office Hours</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a href="#" class="navbar__item navbar__link">Schedules</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cs220-summer21/schedule/class_schedule">Class Schedule</a></li><li><a class="dropdown__link" href="/cs220-summer21/schedule/assignment_schedule">Assignment Schedule</a></li><li><a class="dropdown__link" href="/cs220-summer21/schedule/work_schedule">Suggested Work Schedule</a></li></ul></div><a class="navbar__item navbar__link" href="/cs220-summer21/materials/">Course Material</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a href="#" class="navbar__item navbar__link">Assignments</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cs220-summer21/docs/assignments/warmup">Warmup Homework</a></li><li><a class="dropdown__link" href="/cs220-summer21/docs/assignments/coding_hw1">Homework 1</a></li><li><a class="dropdown__link" href="/cs220-summer21/docs/assignments/coding_hw2">Homework 2</a></li><li><a class="dropdown__link" href="/cs220-summer21/docs/assignments/midterm">Midterm project</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a href="#" class="navbar__item navbar__link">Resources</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cs220-summer21/docs/resources/github-ssh">Github ssh authentication</a></li><li><a class="dropdown__link" href="/cs220-summer21/mindmaps/program_development">Program development concepts (mindmap)</a></li><li><a class="dropdown__link" href="/cs220-summer21/mindmaps/c_cpp_concepts">C/C++ concepts (mindmap)</a></li><li><a href="https://docs.google.com/document/d/19Wwak8BQWpML5ot-u3NRs38EtpuA-I5g5ACQbbDzg5U/edit?usp=sharing" target="_blank" rel="noopener noreferrer" class="dropdown__link">Midterm Review Questions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/cs220-summer21/"><img class="navbar__logo" src="/cs220-summer21/img/logo_cpp.svg" alt="CS220"><strong class="navbar__title">CS220</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/cs220-summer21/docs">Syllabus</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/staff/">Course Staff</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/staff/office_hours">Office Hours</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist">Schedules</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/schedule/class_schedule">Class Schedule</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/schedule/assignment_schedule">Assignment Schedule</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/schedule/work_schedule">Suggested Work Schedule</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/materials/">Course Material</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist">Assignments</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/docs/assignments/warmup">Warmup Homework</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/docs/assignments/coding_hw1">Homework 1</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/docs/assignments/coding_hw2">Homework 2</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/docs/assignments/midterm">Midterm project</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/docs/resources/github-ssh">Github ssh authentication</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/mindmaps/program_development">Program development concepts (mindmap)</a></li><li class="menu__list-item"><a class="menu__link" href="/cs220-summer21/mindmaps/c_cpp_concepts">C/C++ concepts (mindmap)</a></li><li class="menu__list-item"><a href="https://docs.google.com/document/d/19Wwak8BQWpML5ot-u3NRs38EtpuA-I5g5ACQbbDzg5U/edit?usp=sharing" target="_blank" rel="noopener noreferrer" class="menu__link">Midterm Review Questions</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Day 5 In-class Exercise</h1></header><div class="markdown"><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>This is an in-class exercise. An exercise page like this one will contain a brief description but is intended to be supplemented by discussion during our meeting time. Complete the exercise to the best of your ability. Feel free to talk with other students as you work, and do not be afraid to ask questions if you get stuck. Aim to complete as much as possible during our meeting, and try to finish on your own before our next class meeting. Remember to submit on Gradescope once or more, checking the autograder results. For credit, you must submit by the end of the semester. </p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="learning-objectives"></a>Learning Objectives<a aria-hidden="true" tabindex="-1" class="hash-link" href="#learning-objectives" title="Direct link to heading">#</a></h2><div class="admonition admonition-success alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Objectives</h5></div><div class="admonition-content"><p>This exercise will help you gain additional familiarity with:</p><ul><li>Use <em>gdb</em> for debugging code</li><li>Use <em>gdb</em> to analyze the code and correct the code so that it performs correctly</li><li>Use 2-dimensional arrays</li><li>Declare and initialize pointer variables</li><li>Use pointers to pass by reference</li><li>Dynamic memory allocation</li><li>Use <em>valgrind</em> to analyze the memory usage of existing code and identify and remove errors in the code</li><li>Pseudo-random integers</li></ul></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="part-0---get-the-starter-codes"></a>Part 0 - Get the starter codes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#part-0---get-the-starter-codes" title="Direct link to heading">#</a></h3><p>Get the starter codes from <code>cs220-public</code>, copy them over to <code>cs220</code> (remember to create a new directory <code>ex5</code> for that), and create an initial commit with the copied starter codes. You should see the following files: <code>transpose.c</code>, <code>passing.c</code>, <code>pairwise_sum.c</code>, and <code>primes.c</code>.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>If you don&#x27;t remember how to get the starter codes, go back and check previous exercises for instructions.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="part-1---debugging-using-gdb"></a>Part 1 - Debugging using <em>gdb</em><a aria-hidden="true" tabindex="-1" class="hash-link" href="#part-1---debugging-using-gdb" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h4><p>In the starter code, there is a function called <code>transpose</code> in <code>transpose.c</code>. It should transpose the input array (i.e. reflecting it along the diagonal). In this part, you will compile the code and use gdb to debug why it is not working as expected.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="instructions"></a>Instructions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#instructions" title="Direct link to heading">#</a></h4><ol><li><p>Compile the <strong>transpose.c</strong> file by typing this command: <code>gcc -std=c99 -Wall -Wextra -pedantic transpose.c -g -o transpose</code> (or use our alias <code>gccc transpose.c -g -o transpose</code> if you like). Note the use of <code>-g</code>, which enables debugging symbols for <em>gdb</em> to trace the variables, function stacks, etc., and the use of <code>-o</code> to designate the name of the output (executable) file.</p></li><li><p>Run the program using <em>gdb</em>: <code>gdb ./transpose</code></p></li><li><p>Use <em>gdb</em> to step through the code (placing breakpoints as necessary), and print out the variable values to determine why the code is not printing all of the second table, or transposing correctly.</p></li><li><p>Given what you discovered using <em>gdb</em>, fix the code so that it behaves correctly.</p></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="checkpoints"></a>Checkpoints<a aria-hidden="true" tabindex="-1" class="hash-link" href="#checkpoints" title="Direct link to heading">#</a></h4><ol><li>How do you set a breakpoint?</li><li>How do you track a variable&#x27;s value?</li><li>How do you check the function call stack?</li><li>What is the bug that you found in this program?</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="part-2---passing-by-pointers"></a>Part 2 - Passing by pointers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#part-2---passing-by-pointers" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="introduction-1"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction-1" title="Direct link to heading">#</a></h4><p>In this part, you will be working on <strong>passing.c</strong>. You are going to implement a <code>getDate</code> function that prompts for and collects input that is a date in MM/DD/YYYY format. You will practice how to pass variables by pointers and learn when you should pass by pointers instead of by values.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="instructions-1"></a>Instructions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#instructions-1" title="Direct link to heading">#</a></h4><ol><li><p>Open <strong>passing.c</strong> with a text editor and add a declaration and definition for a function called <code>getDate</code>. The function should use three parameters to pass the input values back to the main calling function as integers, storing them in the provided variables. It should also <code>return</code> the number of values that were successfully read by the function. Your main job in this exercise is to figure out how to declare and use the parameters for this function, and how to call it from main. (<code>TODO</code> comments indicate where to add the declaration and definition.)</p></li><li><p>After you have implemented the <code>getDate</code> function, you should complete the code in the <code>main</code> function. You will need to declare and initialize an array of month names, called <code>months</code>.</p></li><li><p>Next, fix the code at the point of the <code>TODO</code> comment in the while loop control so that it calls the <code>getDate</code> function, using the provided variables <code>mon</code>, <code>day</code> and <code>yr</code>.</p></li><li><p>Once you&#x27;ve completed the <code>main</code> function, you should be able to run the program. You should run it with at least three test cases for successful date conversions and three test cases for unsuccessful inputs.  Make sure that all of your tests pass.</p></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="checkpoints-1"></a>Checkpoints<a aria-hidden="true" tabindex="-1" class="hash-link" href="#checkpoints-1" title="Direct link to heading">#</a></h4><ol><li>Why do we need the flag <code>-g</code>?</li><li>What is a pointer?</li><li>How does pass-by-pointers allow us to modify variables that are not in the local scope?</li><li>When should you use pass-by-pointers?</li><li>Is passing an array the same as passing a pointer?</li><li>Is passing pointers a kind of &quot;pass-by-value&quot;?</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="part-3---diagnosing-memory-problems-using-valgrind"></a>Part 3 - Diagnosing memory problems using <em>valgrind</em><a aria-hidden="true" tabindex="-1" class="hash-link" href="#part-3---diagnosing-memory-problems-using-valgrind" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="introduction-2"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction-2" title="Direct link to heading">#</a></h4><p>In this part, you will practice how to use <em>valgrind</em> to identify memory problems in a program. You should work on <code>pairwise_sum.c</code> and <code>prime.c</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="instructions-2"></a>Instructions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#instructions-2" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="pairwise_sumc"></a><code>pairwise_sum.c</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pairwise_sumc" title="Direct link to heading">#</a></h5><p>Open <code>pairwise_sum.c</code> with a text editor. To compile the code, use this command:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcc -std</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">c99 -pedantic -Wall -Wextra pairwise_sum.c -o pairwise_sum  -g</span></div></div></div></div></div><p>Note the use of <code>-g</code>, which enables debugging.  To run the program using valgrind:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">valgrind  --leak-check</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">full  ./pairwise_sum</span></div></div></div></div></div><p>Read the <em>valgrind</em> output and try to determine what is causing the errors that are reported. Modify <code>pairwise_sum.c</code> so that it still performs the desired task (described in comments at the top) but without any memory leaks or invalid reads or writes.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="primesc"></a><code>primes.c</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#primesc" title="Direct link to heading">#</a></h5><p>Do the same thing you did above, but for <code>primes.c</code>.  Since <code>primes.c</code> requires the math library, you will have to add the <code>-lm</code> flag to the compile command:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcc -std</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">c99 -pedantic -Wall -Wextra primes.c -o primes -lm -g</span></div></div></div></div></div><p>The <em>valgrind</em> command is essentially the same:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">valgrind  --leak-check</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">full  ./primes</span></div></div></div></div></div><p>Read the <em>valgrind</em> output and try to determine what is causing the errors that are reported. Modify <code>primes.c</code> so that it still performs the desired task (described in comments at the top) but without any memory leaks or invalid reads or writes.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="checkpoints-2"></a>Checkpoints<a aria-hidden="true" tabindex="-1" class="hash-link" href="#checkpoints-2" title="Direct link to heading">#</a></h4><ol><li>To use <em>valgrind</em>, do we need the program to be compiled with <code>-g</code>?</li><li>What memory problems can be found using <em>valgrind</em>?</li><li>When should you use <em>valgrind</em> to check for memory problems? Before the submission? Before each commit to git?</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="part-4---pseudo-random-integers"></a>Part 4 - Pseudo-random integers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#part-4---pseudo-random-integers" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="introduction-3"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction-3" title="Direct link to heading">#</a></h4><p>In this part, you are going to use the <code>rand</code> function to generate <em>uniform</em> and <em>normal</em> distributions.  Follow the instructions below and the comments in <code>random.c</code> to complete the task.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="instructions-3"></a>Instructions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#instructions-3" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="uniform-distribution"></a><em>uniform</em> distribution<a aria-hidden="true" tabindex="-1" class="hash-link" href="#uniform-distribution" title="Direct link to heading">#</a></h5><p>One important property of the <code>rand</code> function is that it generates
a <em>uniform</em> distribution of pseudo-random integer values.</p><p>In the source file <code>random.c</code>, add a definition for the
<code>uniform_rand</code> function as indicated by the <code>TODO (1)</code> comment.
The <code>uniform_rand</code> function should return pseudo-random integers in
the range 0 to <code>NUM_BUCKETS</code>-1, inclusive, uniformly distributed.</p><p>Next, as indicated by the <code>TODO (2)</code> comment in the <code>main</code> function,
add code to generate 500 uniformly-generated pseudo-random integers
and increment the elements of the <code>hist</code> array accordingly.  (Each
generated pseudo-random integer should be used to increment the <code>hist</code>
array element with the same index as the generated pseudo-random integer.)</p><p>Next, add a definition for the <code>print_hist</code> function, as indicated by
the <code>TODO (3)</code> comment.  It should print a bar graph of the contents
of its array parameter, as described by the comment.</p><p>Then, add a call to the <code>print_hist</code> function to print a bar graph
of the data in the <code>hist</code> array, as indicated by the <code>TODO (4)</code> comment.</p><p>Compile the program:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gcc -g -o random -Wall -Wextra -pedantic -std</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">c99 random.c</span></div></div></div></div></div><p>Run the program using the command <code>./random</code>.  The output should look something
like the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Uniform distribution:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 0: ****************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 1: ****************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 2: ******************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 3: *****************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 4: ************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 5: ***************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 6: *****************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 7: ************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 8: ***********************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 9: **********************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">10: ****************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">11: *************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">12: ******************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">13: *******************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">14: *****************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">15: *************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">16: ********************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">17: *****************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">18: ********************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">19: **************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">20: *******************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">21: **************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">22: ***************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">23: ***********</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">24: ***********</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">25: **************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">26: *****************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">27: ***************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">28: ***********</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">29: **************************</span></div></div></div></div></div><p>The output of <code>print_hist</code> should show that each element of the <code>hist</code> array
values that are similar to each other.  This is what we expect from a uniform
distribution.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="normal-distribution"></a><em>normal</em> distribution<a aria-hidden="true" tabindex="-1" class="hash-link" href="#normal-distribution" title="Direct link to heading">#</a></h5><p>A <em>normal</em> distribution of pseudo-random integers can be generated by
summing multiple uniformly-distributed pseudo-random integer values.</p><p>In <code>random.c</code> add a definition for the <code>normal_rand</code> function, as indicated
by the <code>TODO (5)</code> comment.  This function should return a normal distribution
of integers (refer to the comment for details).
The <code>normal_rand</code> function should return pseudo-random integers in
the range 0 to <code>NUM_BUCKETS</code>-1, inclusive, normally distributed.</p><p>Then, as indicated by the <code>TODO (6)</code> comment in the <code>main</code> function,
add code to generate 500 normally-generated pseudo-random integers and
increment the elements of the <code>hist</code> array accordingly.  (Each generated
pseudo-random integer should be used to increment the <code>hist</code> array
element with the same index as the generated pseudo-random integer.)</p><p>Next, add a call to the <code>print_hist</code> function to print a bar graph
of the data in the <code>hist</code> array as indicated by the <code>TODO (7)</code> comment.</p><p>Compile and run the program.  The output should look something like
the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Normal distribution:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 0: </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 1: *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 2: </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 3: *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 4: *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 5: </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 6: *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 7: *********</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 8: ********************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 9: **********************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">10: ********************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">11: ********************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">12: *************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">13: *********************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">14: *********************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">15: ***********************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">16: ***********************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">17: ************************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">18: ****************************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">19: ******************************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">20: ***************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">21: ****************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">22: *************</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">23: ***********</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">24: *****</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">25: *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">26: ***</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">27: **</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">28: </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">29: </span></div></div></div></div></div><p>Your program&#x27;s output doesn&#x27;t need to look exactly like the output shown above,
but it should show a &quot;bell curve&quot; centered at approximately the middle of the
array of counts.</p><p>You may need to experiment a bit to find a good way to generate a more-or-less
normal distribution.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="checkpoints-3"></a>Checkpoints<a aria-hidden="true" tabindex="-1" class="hash-link" href="#checkpoints-3" title="Direct link to heading">#</a></h4><ol><li>What is the range of <code>rand()</code>? What is the biggest integer it can generate?</li><li>What does <code>srand()</code> do? Is there a way to fix the sequence of pseudo-random integers?</li><li>How do you generate random floating numbers between <code>0</code> and <code>1</code>?</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="part-5---gradescope-submission"></a>Part 5 - Gradescope submission<a aria-hidden="true" tabindex="-1" class="hash-link" href="#part-5---gradescope-submission" title="Direct link to heading">#</a></h3><p>Create a <em>zip</em> file called <code>ex5.zip</code>, which contains <code>transpose.c</code>, <code>passing.c</code>, <code>pairwise_sum.c</code>, <code>primes.c</code>, and <code>random.c</code> with your implementation and fixes.  Submit the zip file as <a href="https://www.gradescope.com/courses/266485/assignments/1339724" target="_blank" rel="noopener noreferrer">Day 5 In-class Exercise</a> on Gradescope. Make sure your program passes all the autograder tests in order to get full credit. It is due before the next class.  However, late submission is allowed until our last class.  Even so, we highly recommend you to keep up the schedule, finish each in-class exercise, and submit it on Gradescope before the next class.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#learning-objectives" class="table-of-contents__link">Learning Objectives</a><ul><li><a href="#part-0---get-the-starter-codes" class="table-of-contents__link">Part 0 - Get the starter codes</a></li><li><a href="#part-1---debugging-using-gdb" class="table-of-contents__link">Part 1 - Debugging using <em>gdb</em></a></li><li><a href="#part-2---passing-by-pointers" class="table-of-contents__link">Part 2 - Passing by pointers</a></li><li><a href="#part-3---diagnosing-memory-problems-using-valgrind" class="table-of-contents__link">Part 3 - Diagnosing memory problems using <em>valgrind</em></a></li><li><a href="#part-4---pseudo-random-integers" class="table-of-contents__link">Part 4 - Pseudo-random integers</a></li><li><a href="#part-5---gradescope-submission" class="table-of-contents__link">Part 5 - Gradescope submission</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2021 CS220, Johns Hopkins University, Built with Docusaurus.</div></div></div></footer></div>
<script src="/cs220-summer21/styles.5a9dc67c.js"></script>
<script src="/cs220-summer21/runtime~main.4b7a01e5.js"></script>
<script src="/cs220-summer21/main.26f5c474.js"></script>
<script src="/cs220-summer21/1.c12b4abb.js"></script>
<script src="/cs220-summer21/2.b4f7c0f8.js"></script>
<script src="/cs220-summer21/31.4c37de0b.js"></script>
<script src="/cs220-summer21/32.a7ff71e2.js"></script>
<script src="/cs220-summer21/f976f453.739ed31f.js"></script>
<script src="/cs220-summer21/17896441.6354757a.js"></script>
<script src="/cs220-summer21/29729dc7.13a501c9.js"></script>
</body>
</html>